<div class="max-w-7xl mx-auto px-4 py-4">

  <!-- Search Bar -->
  <div class="mb-4 lg:mb-6 flex justify-center">
    <div class="relative w-full md:w-1/2">
      <span class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
        <!-- Search icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.65 4.65a7.5 7.5 0 0012 12z" />
        </svg>
      </span>

      <input type="text" [(ngModel)]="searchText" placeholder="Search products..." class="w-full border border-gray-300 rounded-xl py-3 px-5 pl-12 text-sm 
               shadow-sm focus:outline-none focus:ring-2 focus:ring-tezblue" />
    </div>
  </div>


  <div class="mx-auto mb-2 lg:mb-4">
    <h1 class="text-xl font-bold md:text-xl md:leading-tight dark:text-white">Products</h1>
  </div>

  <!-- Service Cards Grid -->
  <!-- WEB VIEW -->
  <div class="hidden md:block">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <div *ngFor="let service of services | filterByText: searchText : ['name', 'description']"
        class="bg-white rounded-xl shadow-sm hover:shadow-md transition border border-gray-200 overflow-hidden">

        <img [src]="service.imageUrl" alt="{{ service.name }}" class="w-full h-40 object-cover" />

        <div class="p-4">
          <h2 class="text-lg font-semibold text-gray-900">{{ service.name }}</h2>
          <p class="text-sm text-gray-600 mt-1 h-10 overflow-hidden">{{ service.description }}</p>

          <div *ngIf="getFirstVariant(service) as variant" class="flex items-center space-x-3 mt-4">
            <span class="text-lg font-bold text-gray-900">
              ₹{{ variant.discountPrice }}
            </span>

            <span class="text-sm text-gray-400 line-through">
              ₹{{ variant.price }}
            </span>

            <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded-md">
              {{ getDiscountPercentage(service) }}% OFF
            </span>
          </div>

          <!-- Fallback when no variants -->
          <div *ngIf="!getFirstVariant(service)" class="mt-4 text-sm text-gray-500">
            Price not available
          </div>

          <button
            class="mt-5 w-full bg-tezblue text-white text-md uppercase font-medium py-2 rounded-lg hover:bg-tezblue-dark transition"
            [routerLink]="['/product-details', service.productId]">
            Book Now
          </button>
        </div>

      </div>

    </div>
  </div>

  <!-- MOBILE VIEW -->
  <div class="md:hidden space-y-5">

    <div *ngFor="let service of services | filterByText: searchText : ['name', 'description']" class="bg-white rounded-xl border border-tezblue/20 shadow-sm p-4">

      <!-- ROW 1: TEXT + IMAGE -->
      <div class="flex items-start gap-3">

        <!-- LEFT TEXT -->
        <div class="flex-1">
          <h2 class="text-base font-semibold text-gray-900">{{ service.name }}</h2>

          <p class="text-sm text-gray-600 mt-1">
            {{ service.description }}
          </p>
        </div>

        <!-- RIGHT IMAGE -->
        <img [src]="service.imageUrl" class="w-24 h-20 object-cover rounded-md flex-shrink-0" />

      </div>

      <!-- ROW 2: FULL-WIDTH PRICE + BUTTON -->
      <div class="flex items-center mt-2 w-full">

        <!-- PRICE SECTION -->
        <div *ngIf="getFirstVariant(service) as variant" class="flex items-center space-x-3 mt-4">
          <span class="text-lg font-bold text-gray-900">
            ₹{{ variant.discountPrice }}
          </span>

          <span class="text-sm text-gray-400 line-through">
            ₹{{ variant.price }}
          </span>

          <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded-md">
            {{ getDiscountPercentage(service) }}% OFF
          </span>
        </div>

        <!-- Fallback when no variants -->
        <div *ngIf="!getFirstVariant(service)" class="mt-4 text-sm text-gray-500">
          Price not available
        </div>


        <!-- BUTTON RIGHT-ALIGNED -->
        <button class="ml-auto bg-tezblue text-white text-xs font-semibold py-2 px-3 rounded-md whitespace-nowrap"
          [routerLink]="['/product-details', service.productId]">
          BOOK NOW
        </button>

      </div>

    </div>

  </div>



</div>